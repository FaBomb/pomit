{"ast":null,"code":"import consumer from \"./consumer\";\n$(function () {\n  var chatChannel = consumer.subscriptions.create({\n    channel: 'RoomChannel',\n    room: $('#messages').data('room_id')\n  }, {\n    connected: function connected() {// Called when the subscription is ready for use on the server\n    },\n    disconnected: function disconnected() {// Called when the subscription has been terminated by the server\n    },\n    received: function received(data) {\n      return $('#messages').append(data['message']);\n    },\n    speak: function speak(message) {\n      return this.perform('speak', {\n        message: message\n      });\n    }\n  });\n  $(document).on('keypress', '[data-behavior~=room_speaker]', function (event) {\n    if (event.keyCode === 13) {\n      chatChannel.speak(event.target.value);\n      event.target.value = '';\n\n      if (event.shiftKey) {\n        this.value = content.substring(0, caret - 1) + \"\\n\" + content.substring(caret, content.length);\n        event.stopPropagation();\n      } else {\n        this.value = content.substring(0, caret - 1) + content.substring(caret, content.length);\n        $('form').submit();\n      }\n\n      return event.preventDefault();\n    }\n  });\n  $(\".post_btn\").on('click', function (event) {\n    var content = $(\".chat-input\").val();\n    chatChannel.speak(content);\n    $(\".chat-input\").val(\"\");\n  });\n});","map":{"version":3,"sources":["C:/my_work/portfolio/work/pomit/app/javascript/channels/room_channel.js"],"names":["consumer","$","chatChannel","subscriptions","create","channel","room","data","connected","disconnected","received","append","speak","message","perform","document","on","event","keyCode","target","value","shiftKey","content","substring","caret","length","stopPropagation","submit","preventDefault","val"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,YAArB;AAEAC,CAAC,CAAC,YAAW;AACX,MAAMC,WAAW,GAAGF,QAAQ,CAACG,aAAT,CAAuBC,MAAvB,CAA8B;AAAEC,IAAAA,OAAO,EAAE,aAAX;AAA0BC,IAAAA,IAAI,EAAEL,CAAC,CAAC,WAAD,CAAD,CAAeM,IAAf,CAAoB,SAApB;AAAhC,GAA9B,EAAgG;AAClHC,IAAAA,SADkH,uBACtG,CACV;AACD,KAHiH;AAKlHC,IAAAA,YALkH,0BAKnG,CACb;AACD,KAPiH;AASlHC,IAAAA,QAAQ,EAAE,kBAASH,IAAT,EAAe;AACvB,aAAON,CAAC,CAAC,WAAD,CAAD,CAAeU,MAAf,CAAsBJ,IAAI,CAAC,SAAD,CAA1B,CAAP;AACD,KAXiH;AAalHK,IAAAA,KAAK,EAAE,eAASC,OAAT,EAAkB;AACvB,aAAO,KAAKC,OAAL,CAAa,OAAb,EAAsB;AAC3BD,QAAAA,OAAO,EAAEA;AADkB,OAAtB,CAAP;AAGD;AAjBiH,GAAhG,CAApB;AAoBAZ,EAAAA,CAAC,CAACc,QAAD,CAAD,CAAYC,EAAZ,CAAe,UAAf,EAA2B,+BAA3B,EAA4D,UAASC,KAAT,EAAgB;AAC1E,QAAIA,KAAK,CAACC,OAAN,KAAkB,EAAtB,EAA0B;AACxBhB,MAAAA,WAAW,CAACU,KAAZ,CAAkBK,KAAK,CAACE,MAAN,CAAaC,KAA/B;AACAH,MAAAA,KAAK,CAACE,MAAN,CAAaC,KAAb,GAAqB,EAArB;;AACA,UAAIH,KAAK,CAACI,QAAV,EAAmB;AACjB,aAAKD,KAAL,GAAaE,OAAO,CAACC,SAAR,CAAkB,CAAlB,EAAqBC,KAAK,GAAG,CAA7B,IAAkC,IAAlC,GAAyCF,OAAO,CAACC,SAAR,CAAkBC,KAAlB,EAAyBF,OAAO,CAACG,MAAjC,CAAtD;AACAR,QAAAA,KAAK,CAACS,eAAN;AACD,OAHD,MAGM;AACJ,aAAKN,KAAL,GAAaE,OAAO,CAACC,SAAR,CAAkB,CAAlB,EAAqBC,KAAK,GAAG,CAA7B,IAAkCF,OAAO,CAACC,SAAR,CAAkBC,KAAlB,EAAyBF,OAAO,CAACG,MAAjC,CAA/C;AACAxB,QAAAA,CAAC,CAAC,MAAD,CAAD,CAAU0B,MAAV;AACD;;AACD,aAAOV,KAAK,CAACW,cAAN,EAAP;AACD;AACF,GAbD;AAcA3B,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAee,EAAf,CAAkB,OAAlB,EAA2B,UAASC,KAAT,EAAgB;AACzC,QAAMK,OAAO,GAAGrB,CAAC,CAAC,aAAD,CAAD,CAAiB4B,GAAjB,EAAhB;AACA3B,IAAAA,WAAW,CAACU,KAAZ,CAAkBU,OAAlB;AACArB,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiB4B,GAAjB,CAAqB,EAArB;AACD,GAJD;AAKD,CAxCA,CAAD","sourcesContent":["import consumer from \"./consumer\"\n\n$(function() {\n  const chatChannel = consumer.subscriptions.create({ channel: 'RoomChannel', room: $('#messages').data('room_id') }, {\n    connected() {\n      // Called when the subscription is ready for use on the server\n    },\n\n    disconnected() {\n      // Called when the subscription has been terminated by the server\n    },\n\n    received: function(data) {\n      return $('#messages').append(data['message']);\n    },\n\n    speak: function(message) {\n      return this.perform('speak', {\n        message: message\n      });\n    }\n  });\n\n  $(document).on('keypress', '[data-behavior~=room_speaker]', function(event) {\n    if (event.keyCode === 13) {\n      chatChannel.speak(event.target.value);\n      event.target.value = '';\n      if (event.shiftKey){\n        this.value = content.substring(0, caret - 1) + \"\\n\" + content.substring(caret, content.length);\n        event.stopPropagation();\n      } else{\n        this.value = content.substring(0, caret - 1) + content.substring(caret, content.length);\n        $('form').submit();\n      }\n      return event.preventDefault();\n    }\n  });\n  $(\".post_btn\").on('click', function(event) {\n    const content = $(\".chat-input\").val();\n    chatChannel.speak(content);\n    $(\".chat-input\").val(\"\")\n  });\n});\n"]},"metadata":{},"sourceType":"module"}